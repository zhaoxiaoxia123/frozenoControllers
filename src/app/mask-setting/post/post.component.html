<div id="content">
    <sa-widgets-grid>
        <div class="row">
            <article class="col-sm-12 ">
                <sa-widget [editbutton]="false" [deletebutton]="false" [colorbutton]="false">
                    <header>
                        <nav>
                            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">文章列表</a>
                                <!--<a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">滚动条图片</a>-->
                            </div>
                        </nav>
                    </header>
                    <div>
                        <div class="widget-body no-padding" >
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active " id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" >
                                    <article>
                                        <div class="navbar " style="width:100%;">
                                            <form  class="navbar-form " novalidate="" role="search" >
                                                <div class="btn-group" (click)="lgModal.show();">
                                                    <button type="button" class="btn btn-primary"><span class="fa-fw fa fa-plus  mr-5"></span>添加</button>
                                                </div>
                                            </form>
                                        </div>
                                    </article>
                                    <div  class="">
                                        <table class="table table-striped smart-form table-height-20 ">
                                            <thead class="">
                                            <tr>
                                                <th>编号</th>
                                                <th>标题 </th>
                                                <th>分类</th>
                                                <th>简介</th>
                                                <th>发布时间</th>
                                                <th>是否有效</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <!-- class="table-color"-->
                                            <tr *ngFor="let pl of postList?.result?.data;let ind = index;" (click)="isStatusShow(pl.post_id)" [ngClass]="{'table-color':editId == pl.post_id}">
                                                <td>{{ ind }}</td>
                                                <td>{{ pl.title }}</td>
                                                <td>
                                                <span [ngSwitch]="pl.type">
                                                    <span class="label-normal" *ngSwitchCase="1">帮助与客服</span>
                                                    <span class="label-blue" *ngSwitchCase="2">成长课堂</span>
                                                    <span class="label-full" *ngSwitchCase="3">产品百科</span>
                                                    <span class="label-full" *ngSwitchCase="4">规则中心</span>
                                                    <span class="label-full" *ngSwitchCase="5">政策中心</span>
                                                    <span class="label-full" *ngSwitchCase="6">系统通知</span>
                                                    <span class="label-full" *ngSwitchCase="7">冻龄智美通知</span>
                                                    <span class="label-full" *ngSwitchCase="8">激励中心</span>
                                                    <span class="label-full" *ngSwitchCase="9">广告</span>
                                                    <span class="label-unknown" *ngSwitchDefault>未知</span>
                                                </span>
                                                </td>
                                                <td>{{ pl.introduction }}</td>
                                                <td>{{ pl.created_at }}</td>
                                                <td>
                                                <span [ngSwitch]="pl.state">
                                                    <span class="label-normal" *ngSwitchCase="1">是</span>
                                                    <span class="label-blue" *ngSwitchCase="0">否</span>
                                                    <span class="label-unknown" *ngSwitchDefault>未知</span>
                                                </span>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- 底部-（分页部分）-->
                                    <div class="footer-size flex-justify-end">
                                        <ul class="pagination" *ngIf="postList" >
                                            <li *ngFor="let p of postList?.result?.page" class="{{p.class}}">
                                                <a class="page-link" (click)="pagination(p.value)" *ngIf="p.method=='method'">{{p.text}}</a>
                                                <a class="page-link" *ngIf="p.method==''">{{p.text}}</a>
                                            </li>
                                            <li class="page-item disabled">
                                                <a  class="page-link" disabled>共{{postList.result?.total}}条</a>
                                            </li>
                                        </ul>
                                    </div>

                                </div>
                                <div class="tab-pane fade " id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" >

                                </div>
                            </div>
                        </div>
                    </div>
                </sa-widget>
            </article>
        </div>
    </sa-widgets-grid>
</div>

<!-- 上传文章 -->
<div bsModal #lgModal="bs-modal" class="modal fade bd-example-modal-xl" id="postScrollable" tabindex="-1" role="dialog" aria-labelledby="postScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="postScrollableTitle">添加</h5>
                <button type="button" class="close" (click)="lgModal.hide()" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body height-overflow-380">
                <form>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label txt-color-blue">分类<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <select  class="form-control" [(ngModel)]="type" [ngModelOptions]="{standalone: true}">
                                <option value="0">--请选择分类--</option>
                                <option *ngFor="let tl of typeList" value="{{ tl.id }}">{{tl.name}}</option>
                            </select>
                        </div>
                    </div>
                </form>
                <form>
                    <div class="form-group row" *ngIf="type == 8">
                        <label class="col-sm-2 col-form-label txt-color-blue">主题<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="主题" name="theme" [(ngModel)]="theme" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>
                    <div class="form-group row " *ngIf="type == 8">
                        <label class="col-sm-2 col-form-label txt-color-blue">开始时间<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="开始时间" name="startDate" [(ngModel)]="startDate" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>
                    <div class="form-group row " *ngIf="type == 8">
                        <label class="col-sm-2 col-form-label txt-color-blue">结束时间<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="结束时间" name="endDate" [(ngModel)]="endDate" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>
                    <div class="form-group row" >
                        <label class="col-sm-2 col-form-label txt-color-blue">标题<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="标题" name="title" [(ngModel)]="title" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>
                    <div class="form-group row" >
                        <label class="col-sm-2 col-form-label txt-color-blue">简介<span class="asterisk-color">*</span></label>
                        <div class="col-sm-10">
                            <textarea class="form-control" rows="2" name="introduction" [(ngModel)]="introduction" [ngModelOptions]="{standalone: true}"></textarea>
                        </div>
                    </div>
                    <div class="form-group row" >
                        <label class="col-sm-2 col-form-label ">跳转地址</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="链接地址" name="href" [(ngModel)]="href" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>

                    <div class="form-group row" >
                        <label class="col-sm-2 col-form-label ">标签</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" placeholder="标签" name="tag" [(ngModel)]="tag" [ngModelOptions]="{standalone: true}">
                        </div>
                    </div>
                </form>


                <div class="form-group row" >
                    <div class="col-sm-12" >
                        <div class="card">
                            <img  class="" style="width:100%;padding:10px;" src="assets/img/news/news4.jpg" >
                            <div class="card-body">
                                <p class="card-text">仅支持JPG、GIF、PNG图片文件，且小于1M</p>
                                <button type="button" class="btn btn-primary " (click)="postFile(3)" >图片上传</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group row" >
                    <label class="col-sm-2 col-form-label ">排序</label>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" placeholder="请输入顺序" name="" >
                    </div>
                </div>

                <div class="form-group row" >
                    <div class="col-sm-6" >
                        <div class="card" >
                            <img-cropper style="text-align:center;padding-top:1.25rem;" #avatarCropper [image]="data1" [settings]="avatarSettings" (onCrop)="cropped($event)"></img-cropper>
                            <div class="card-body" style="padding: 0 1.25rem 1.25rem;">
                                <h5 class="card-title">封面图片</h5>
                                <p class="card-text">仅支持JPG、GIF、PNG图片文件，且小于1M</p>
                                <div class="" style="background:#f2f2f2;padding:8px;margin-bottom:10px;">
                                    <input id="image-input"  type="file" c-img-cropper-select [cropper]="avatarCropper">
                                </div>
                                <button type="button" class="btn btn-primary " (click)="postFile(1)" >图片上传</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6" >
                        <div class="card" >
                            <img-cropper style="text-align:center;padding-top:1.25rem;" #avatarCropper2 [image]="data2" [settings]="avatarSettings2" (onCrop)="cropped($event)"></img-cropper>
                            <div class="card-body" style="padding: 0 1.25rem 1.25rem;">
                                <h5 class="card-title">封面图片</h5>
                                <p class="card-text">仅支持JPG、GIF、PNG图片文件，且小于1M</p>
                                <div class="" style="background:#f2f2f2;padding:8px;margin-bottom:10px;">
                                    <input id="image-input2" type="file" c-img-cropper-select [cropper]="avatarCropper2">
                                </div>
                                <button type="button" class="btn btn-primary " (click)="postFile(2)">图片上传</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group row" >
                    <label class="col-sm-2 col-form-label ">正文内容</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="3" name="description" [(ngModel)]="description" [ngModelOptions]="{standalone: true}"></textarea>
                    </div>
                </div>
                <div class="form-group row" >
                    <label class="col-sm-2 col-form-label ">是否有效</label>
                    <div class="col-sm-10">
                        <ng-container>
                            <input type="radio" name="state" [(ngModel)]="state" [value]="1" [checked]="state==1" (click)="onCheckState(1)"> 是
                            <input type="radio" name="state" [(ngModel)]="state" [value]="2" [checked]="state==2" (click)="onCheckState(2)"> 否
                        </ng-container>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"  (click)="submitPost()">保存</button>
                <button type="button" class="btn btn-secondary" (click)="lgModal.hide()">取消</button>
            </div>
        </div>
    </div>
</div>
