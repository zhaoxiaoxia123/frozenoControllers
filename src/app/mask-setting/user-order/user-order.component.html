<div id="content">
    <sa-widgets-grid>
        <div class="row">
            <article class="col-sm-12 ">
                <sa-widget [editbutton]="false" [deletebutton]="false" [colorbutton]="false">
                    <header>
                        <span class="widget-icon"> <i class="fa {{menuInfos?.menu_icon}}"></i> </span>
                        <h2>{{menuInfos?.menu_name}}</h2>
                    </header>
                    <div>
                        <div class="widget-body no-padding">
                            <article>
                                <div class="navbar navbar-default">
                                    <!--详情一直都显示，打印、备货（在有待备货状态的时候一直显示，其他情况显示灰色）、发货（在待备货时显示，其他时候显示灰色），添加删除不显示。修改需管理才显示（可以修改订单状态-针对退换货的，功能先不做，修改也可以先不显示）。作废管理员有权限（未支付、待备货和待发货的订单可以作废，状态显示交易失败）-->
                                    <form  class="navbar-form" role="search" [formGroup]="formModel" (ngSubmit)="onSubmit()" novalidate >
                                        <!--<div class="btn-group" *ngIf="isPermission(menu_id,'add')">-->
                                            <!--<button type="button" class="btn btn-primary" (click)="isDemo('/forms/inventory1','0')"><span class="fa-fw fa fa-plus  mr-5"></span>添加</button>-->
                                        <!--</div>-->
                                        <!--<div class="btn-group" *ngIf="isPermission(menu_id,'edit')">-->
                                            <!--<button type="button" [ngClass]="{'btn btn-warning':true,'not-click':editStatusUserOrderId == 0}" (click)="detailUserOrder('edit')"><span class="fa-fw fa fa-pencil mr-5"></span>修改</button>-->
                                        <!--</div>-->
                                        <!--<div class="btn-group" *ngIf="isPermission(menu_id,'delete')" >-->
                                        <!--<button type="button" [ngClass]="{'btn btn-danger':true,'not-click':editStatusUserOrderId == 0}" (click)="deleteUserOrder('id')"><span class="fa-fw fa  fa-trash-o mr-5"></span>删除</button>-->
                                        <!--</div>-->
                                        <div class="btn-group">
                                            <button type="button" [ngClass]="{'btn btn-warning':true,'not-click':editStatusUserOrderId == 0 || !(editOrderState == 2 && editPrepareState == 1)}" (click)="choiceOrder()">备货并发货</button>
                                        </div>
                                        <div class="btn-group">
                                            <button type="button" [ngClass]="{'btn btn-warning':true,'not-click':editStatusUserOrderId == 0 || !(editOrderState == 2 && editPrepareState == 2)}" (click)="sendOrder(1)">发货</button>
                                        </div>
                                        <div class="btn-group">
                                            <button type="button" [ngClass]="{'btn btn-danger':true,'not-click':editStatusUserOrderId == 0 || !(editOrderState == 1 || editOrderState == 2)}" (click)="cancelOrder()">作废</button>
                                        </div>
                                        <div class="btn-group">
                                            <button type="button" [ngClass]="{'btn btn-success':true,'not-click':editStatusUserOrderId == 0}" (click)="detailUserOrder('detail')"><span class="fa-fw fa fa-list-alt mr-5"></span>详情</button>
                                        </div>
                                        <div style="display: inline-block;">
                                            <button type="button" [ngClass]="{'btn btn-warning':true,'not-click':editStatusUserOrderId == 0}" (click)="beforePrint()">打印</button>
                                        </div>
                                    </form>
                                    <iframe style="display: none;"></iframe>
                                    <form  class="navbar-form" novalidate="" role="search" [formGroup]="formModel" (ngSubmit)="onSubmit()" >
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                {{stateShow}}
                                            </button>
                                            <!--未支付、待备货、待发货、待收货、退款中、交易成功、交易失败、已退款-->
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" (click)="getUserOrderList('1','all','全部')">全部</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','1','未支付')">未支付</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','21','待备货')">待备货</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','2','待发货')">待发货</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','3','待收货')">待收货</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','6','退款中')">退款中</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','4','交易成功')">交易成功</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','5,6,7','交易失败')">交易失败</a>
                                                <a class="dropdown-item" (click)="getUserOrderList('1','7','已退款')">已退款</a>
                                            </div>
                                        </div>
                                        <div class="btn-group">
                                            <input type="text" class="form-control" maxlength="15" formControlName="keyword"  placeholder="请输入搜索内容">
                                        </div>
                                        <div class="btn-group">
                                            <button type="button" class="btn default-btn" >搜索</button>
                                        </div>
                                    </form>
                                </div>
                            </article>
                            <div style="padding:0;">
                                <div class="table-scrolling padding0 printonly">
                                    <table class="table table-striped smart-form table-height-20">
                                        <thead>
                                        <tr>
                                            <th>序号</th>
                                            <th>订单编号</th>
                                            <th>来源</th>
                                            <th>购买人</th>
                                            <!--<th>销售方</th>-->
                                            <th>负责人</th>
                                            <th>商品明细</th>
                                            <th>总金额</th>
                                            <th>订单状态</th>
                                            <th>应返佣金</th>
                                            <th>返佣状态</th>
                                            <th>下单时间</th>
                                        </tr>
                                        </thead>
                                        <tbody *ngIf="orderList?.result">
                                        <tr *ngFor="let sl of orderList?.result?.data;let ind = index;" (click)="isStatusShow(sl.o_id,sl.frozeno_order_state,sl.frozeno_prepare_state)" [ngClass]="{'table-color':editStatusUserOrderId == sl.o_id}">
                                            <td>{{(ind+1)}}</td>
                                            <td *ngIf="sl.o_is_complete == 3" style="color: blue;">{{ sl.o_order }}</td>
                                            <!--<td *ngIf="sl.o_is_complete != 3">{{ sl.o_order }}</td>-->
                                            <td>
                                                <span [ngSwitch]="sl.frozeno_seller">
                                                  <span class="label-normal" *ngSwitchCase="1">小程序商城</span>
                                                  <span class="label-blue" *ngSwitchCase="2">经销商管理平台</span>
                                                </span>
                                            </td>
                                            <td data-toggle="tooltip" data-placement="top" title="{{sl.order_name}}">{{ sl.frozeno_order_name }}</td>
                                            <!--姓名  手机号码-->
                                            <td>{{ sl.c_name?sl.c_name:sl.c_phone }}&nbsp;&nbsp;15228592891</td>
                                            <!--小程序商城
                                            经销商管理平台
                                            -->

                                            <td>谷子健</td>
                                            <td data-toggle="tooltip" data-placement="top" title="无创水光尊享礼盒*1，润月雅水光精华套装*3，纯钛金属表皮电子套装*3，纯钛金属表皮电子*20，润月雅水光精华*20">无创水光尊享礼盒*1，润月雅水光精华套装*3，纯钛金属表皮电子套装*3，纯钛金属表皮电子*20，润月雅水光精华*20</td>
                                            <td>{{ sl.frozeno_rate_amount }}</td>

                                            <td>
                                                <!--管理员可取消——未支付、待备货、待发货销售单里面的订单审核通过自动生成用户订单
                                                状态：未支付、待备货、待发货、待收货、退款中、交易成功、交易失败、已退款
                                                物流开通后还需添加状态：已签收
                                                在待发货状态下显示：打印、备货、发货。其他状态不显示。
                                                -->
                                                <span [ngSwitch]="sl.frozeno_order_state">
                                                  <span class="label-normal" *ngSwitchCase="1">未支付</span>
                                                  <span class="label-blue" *ngSwitchCase="2">
                                                     <span *ngIf="sl.frozeno_prepare_state == 1">
                                                      待备货</span>
                                                     <span style="color: blue" *ngIf="sl.frozeno_prepare_state == 2">
                                                      待发货</span>
                                                  </span>
                                                  <span class="label-full" *ngSwitchCase="3">待收货</span>
                                                  <span class="label-full" *ngSwitchCase="4">交易成功</span>
                                                  <span class="label-full" *ngSwitchCase="5">交易失败</span>
                                                  <span class="label-full" *ngSwitchCase="6">交易失败</span>
                                                  <span class="label-full" *ngSwitchCase="7">已退款</span>
                                                  <span class="label-unknown" *ngSwitchDefault>未知</span>
                                                </span>
                                            </td>
                                            <td>12</td>
                                            <td>
                                                <span>
                                                    <span class="label-normal" >未结算</span>
                                                    <span class="label-full" >已结算</span>
                                                </span>
                                            </td>
                                            <td>{{ sl.created_at }}</td>
                                        </tr>
                                        </tbody>
                                        <tbody *ngIf="orderList?.result?.data.length == 0">
                                            <tr style="text-align: center;">
                                                <td colspan="10">没有数据。</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- 底部-（分页部分）-->
                            <div class="footer-size flex-justify-end">
                                <ul class="pagination" *ngIf="orderList.length > 0" >
                                    <li *ngFor="let p of orderList?.page" class="{{p.class}}">
                                        <a class="page-link" (click)="pagination(p.value)" *ngIf="p.method=='method'">{{p.text}}</a>
                                        <a class="page-link" *ngIf="p.method==''">{{p.text}}</a>
                                    </li>
                                    <li class="page-item disabled">
                                        <a class="page-link" disabled>共{{orderList.result?.total}}条</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </sa-widget>
            </article>
        </div>
    </sa-widgets-grid>

    <!--备货-->
    <div class="modal fade bd-example-modal-xl" bsModal #choiceExampleModal="bs-modal" aria-hidden="true">
        <!--id="choiceexampleModal" tabindex="-1" role="dialog" aria-labelledby="choiceexampleModalLabel" aria-hidden="true"-->
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="choiceexampleModalLabel">备货并发货（订单编号：{{orderInfo.result?.o_order}}）</h5>
                    <button type="button" class="close" (click)="closeChoice()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-overflow-y">
                    <div class="m-order">
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-6"><span class="m-orderdetails-title">订单编号：</span>{{orderInfo.result?.o_order}}</div>
                            <div class="col-6 col-md-6"><span class="m-orderdetails-title">快递单号：</span>{{orderInfo.result?.frozeno_express_code}}</div>
                        </div>
                    </div>
                    <div class="m-order">
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-4 "><span class="m-orderdetails-title">配送地址————</span></div>
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">姓名：</span>{{orderInfo.result?.name}}</div>
                            <div class="col-6 col-md-4 "><span class="m-orderdetails-title">手机号：</span>{{orderInfo.result?.phone}}</div>
                        </div>
                        <div class="row m-orderdetails">
                            <div class="col-12 col-md-4"><span class="m-orderdetails-title">邮编：</span>{{orderInfo.result?.zip}}</div>
                            <div class="col-12 col-md-8"><span class="m-orderdetails-title">详细地址：</span>{{orderInfo.result?.province}}{{orderInfo.result?.city}}{{orderInfo.result?.area}}{{orderInfo.result?.address}}</div>
                        </div>
                    </div>
                    <div class="m-order">
                        <!--表格默认最少显示5行-->
                        <!--<div class="bg-light" style="padding:10px;">-->
                            <!--<form  class="navbar-form" role="search">-->
                                <!--<div class="btn-group" style="display: inline-block;">-->
                                    <!--<essence-ng2-print-->
                                            <!--[mode]="'popup'"-->
                                            <!--[popTitle]="'用户订单表格打印'"-->
                                            <!--[btnText]="'打印'"-->
                                            <!--[btnClass]="{'btn': true, 'btn-warning': true}"-->
                                            <!--[printHTML]="print_div"-->
                                            <!--[printStyle]="printStyle"-->
                                            <!--[printCSS]="printCSS"-->
                                            <!--(click)="beforePrint()"-->
                                            <!--(printComplete)="printComplete()">-->
                                    <!--</essence-ng2-print>-->
                                <!--</div>-->
                                <!--<div class="btn-group">-->
                                    <!--<input type="text" class="form-control" style="width: 300px"  name="code" placeholder="请扫码或输入">-->
                                <!--</div>-->
                                <!--<div class="btn-group" >-->
                                    <!--<input type="text" class="form-control"  name="count" placeholder="请输入个数">-->
                                <!--</div>-->
                                <!--<div class="btn-group">-->
                                    <!--<button type="button" class="btn btn-primary" >备货录入</button>-->
                                <!--</div>-->
                            <!--</form>-->
                        <!--</div>-->
                        <span style="color: red;">*备货列表扫码或输入完成后，点击右下角‘备货’按钮即可录入成功。</span>
                        <div class="btn-group" style="display: inline-block;float: right">
                            <!--<essence-ng2-print-->
                                    <!--[mode]="'popup'"-->
                                    <!--[popTitle]="'用户订单表格打印'"-->
                                    <!--[btnText]="'打印'"-->
                                    <!--[btnClass]="{'btn': true, 'btn-warning': true}"-->
                                    <!--[printHTML]="print_div"-->
                                    <!--[printStyle]="printStyle"-->
                                    <!--[printCSS]="printCSS"-->
                                    <!--(click)="beforePrint()"-->
                                    <!--(printComplete)="printComplete()">-->
                            <!--</essence-ng2-print>-->
                            <button type="button" class="btn btn-warning" (click)="beforePrint()">打印</button>
                        </div>
                        <div class="bg-light" style="padding:10px;">
                            <p>下单套装：</p>
                            <span *ngFor="let p of orderInfo?.result?.products">
                                <span>{{p.category_desc}}*{{p.product_count}}</span>&nbsp;&nbsp;
                            </span>

                            <form  class="navbar-form" role="search">
                                <div class="btn-group" style="display: inline-block;">
                                    <essence-ng2-print
                                            [mode]="'popup'"
                                            [popTitle]="'用户订单表格打印'"
                                            [btnText]="'打印'"
                                            [btnClass]="{'btn': true, 'btn-warning': true}"
                                            [printHTML]="print_div"
                                            [printStyle]="printStyle"
                                            [printCSS]="printCSS"
                                            (click)="beforePrint()"
                                            (printComplete)="printComplete()">
                                    </essence-ng2-print>
                                </div>
                                <div class="btn-group">
                                    <input type="text" class="form-control" style="width: 300px"  name="code" placeholder="请扫码或输入">
                                </div>
                                <!--扫码过后默认为1，可更改-->
                                <div class="btn-group" >
                                    <input type="text" class="form-control"  name="count" placeholder="请输入数量">
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary" >录入</button>
                                </div>
                            </form>

                        </div>
                        <!--<button type="button" class="btn btn-primary" style="float: right" (click)="stockEntry()">备货录入</button>-->
                        <table class="table table-striped table-forum">
                            <thead>
                                <tr>
                                    <th scope="col" style="width: 18%">名称</th>
                                    <th style="width: 10%">购买数量</th>
                                    <th style="width: 10%">备货数量</th>
                                    <th style="width: 62%">扫码录入</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let pd of orderInfo?.result?.products_disintegrate;let ind = index;">
                                    <td>{{pd.category_desc}}</td>
                                    <td>{{pd.product_count}}</td>
                                    <td>{{pd.choice_count}}</td>
                                    <td>
                                        <input type="text" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="pd.product_code" value="{{pd.product_code}}" (change)="sumPCount(pd.product_code,ind)" placeholder="请扫码或输入" [ngStyle]="{'border-color': (((pd.product_count != pd.choice_count && pd.product_code != '')|| pd.border_color=='red') ? 'red':'')}">
                                    </td>
                                </tr>
                            <tr>
                                <td >无创水光尊享礼盒</td>
                                <td>5</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td >润月雅水光精华套装</td>
                                <td>5</td>
                                <td>3</td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="bg-light" style="padding:10px;">
                            <form  class="navbar-form" role="search">
                                <div class="btn-group">
                                    <input type="text" class="form-control" style="width: 300px" [ngModelOptions]="{standalone: true}" name="stockExpressCode" [(ngModel)]="stockExpressCode" placeholder="请扫码或输入快递单号">
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary" (click)="expressCodeEntry()">快递单号录入</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="closeChoice()">取消</button>
                    <button type="button" class="btn btn-danger" (click)="clearStock()">全部清空</button>
                    <button type="button" class="btn btn-warning" (click)="stockEntry(1)">备货</button>
                    <!--待备货状态的订单-->
                    <button type="button" class="btn btn-warning" (click)="stockEntry(2)">备货显示下一条</button>
                </div>
            </div>
        </div>
    </div>

    <!--发货-->
    <div class="modal fade bd-example-modal-xl"  bsModal #sendExampleModal="bs-modal" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="sendexampleModalLabel">发货（订单编号：{{orderInfo?.result?.o_order}}）</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" (click)="closeExpress()">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-overflow-y">
                    <div class="m-order">
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-6"><span class="m-orderdetails-title">订单编号：</span>{{orderInfo?.result?.o_order}}</div>
                            <div class="col-6 col-md-6"><span class="m-orderdetails-title">快递单号：</span>{{orderInfo?.result?.frozeno_express_code}}</div>
                        </div>
                    </div>
                    <div class="m-order">
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-4 "><span class="m-orderdetails-title">配送地址————</span></div>
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">姓名：</span>{{orderInfo?.result?.name}}</div>
                            <div class="col-6 col-md-4 "><span class="m-orderdetails-title">手机号：</span>{{orderInfo?.result?.phone}}</div>
                        </div>
                        <div class="row m-orderdetails">
                            <div class="col-12 col-md-4"><span class="m-orderdetails-title">邮编：</span>{{orderInfo?.result?.zip}}</div>
                            <div class="col-12 col-md-8"><span class="m-orderdetails-title">详细地址：</span>{{orderInfo?.result?.province}}{{orderInfo?.result?.city}}{{orderInfo?.result?.area}}{{orderInfo?.result?.address}}</div>
                        </div>
                    </div>
                    <div class="m-order">
                        <!--表格默认最少显示5行-->
                        <div class="bg-light" style="padding:10px;">
                            <form  class="navbar-form" role="search">
                                <div class="btn-group">
                                    <input type="text" class="form-control" style="width: 300px" [ngModelOptions]="{standalone: true}" name="expressCode" [(ngModel)]="expressCode" placeholder="请扫码或输入快递单号">
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary" (click)="expressCodeInput()">录入</button>
                                </div>
                            </form>
                        </div>
                        <table class="table table-striped table-forum">
                            <thead>
                            <tr>
                                <th scope="col">名称</th>
                                <th scope="col">购买数量</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td >无创水光尊享礼盒</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td >润月雅水光精华套装</td>
                                <td>5</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="closeExpress()">取消</button>
                    <button type="button" class="btn btn-warning" (click)="sendOrder(2)">发货</button>
                    <!--待发货状态已备货的订单-->
                    <button type="button" class="btn btn-warning" (click)="sendOrder(3)">发货并显示下一条</button>
                </div>
            </div>
        </div>
    </div>
    <!--用户订单详情-->
    <div bsModal #lgModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">{{orderInfo.result?.o_order}}</h4>
                    <!--<h4 class="modal-title">{{orderInfo.result?.frozeno_order_name}}</h4>-->
                    <button type="button" class="close" (click)="lgModal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-overflow-y">
                    <div class="m-order">
                        <div class="alert alert-secondary" role="alert">
                            基本信息
                        </div>
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">订单编号：</span>{{orderInfo?.result?.o_order}}</div>
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">来源：</span>
                                <span *ngIf="orderInfo?.result?.frozeno_seller == 1">小程序商城</span>
                                <span *ngIf="orderInfo?.result?.frozeno_seller == 2">商户管理平台</span>
                            </div>
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">购买人：</span>{{orderInfo?.result?.c_name}}&nbsp;&nbsp;15228592891</div>
                        </div>
                        <div class="row m-orderdetails">
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">销售方：</span>冻龄智美</div>
                            <div class="col-6 col-md-4"><span class="m-orderdetails-title">负责人：</span>谷子健</div>
                        </div>

                </div>


                <div class="m-order">
                    <div class="alert alert-secondary" role="alert">
                        订单信息
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-12 "><span class="m-orderdetails-title">商品明细：</span>{{orderInfo?.result?.order_name}}</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-12 ">
                            <button type="button" class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">查看详情</button>
                        </div>
                    </div>
                    <div class="m-order">
                        <div class="collapse" id="collapseExample">
                            <!--商品明细-->
                            <!--</div>-->
                            <!--表格默认最少显示5行-->
                            <table class="table table-striped table-forum">
                                <thead>
                                <tr>
                                    <th scope="col">序号</th>
                                    <th scope="col">商品编号</th>
                                    <th scope="col">名称</th>
                                    <th scope="col">数量</th>
                                    <th scope="col">单价</th>
                                    <th scope="col">折扣</th>
                                    <th scope="col">折扣价</th>
                                    <th scope="col">金额</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr *ngFor="let pd of orderInfo?.result?.products;let ind = index;">
                                    <td>{{(ind+1)}}</td>
                                    <td>64646464</td>
                                    <td>{{pd.category_desc}}</td>
                                    <td>{{pd.product_count}}</td>
                                    <td>{{pd.product_before_amount}}</td>
                                    <td>{{pd.frozeno_customer_discount?pd.frozeno_customer_discount:0}}折</td>
                                    <td>222</td>
                                    <td>{{pd.product_amount}}</td>
                                <tr>
                                    <td >1</td>
                                    <td>64646464</td>
                                    <td>无创水光尊享礼盒</td>
                                    <td>1</td>
                                    <td>222</td>
                                    <td>3.5折</td>
                                    <td>222</td>
                                    <td>222</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>{{orderInfo?.result?.totalAmount}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">运费：</span>¥ 0.00</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">优惠券：</span>¥ {{orderInfo?.result?.ticket_amount?orderInfo?.result?.ticket_amount:0}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">积分抵扣：</span>¥ {{orderInfo?.result?.frozeno_point}}</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">商品金额（{{orderInfo?.result?.totalCount}}件）：</span>¥{{orderInfo?.result?.totalAmount}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">总金额：</span>¥ {{orderInfo?.result?.frozeno_order_amount}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">支付方式：</span>微信支付</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">状态：</span>
                            <span [ngSwitch]="orderInfo?.result?.frozeno_order_state">
                                <span class="label-normal" *ngSwitchCase="1">未支付</span>
                                <span class="label-normal" *ngSwitchCase="2">
                                    <span *ngIf="orderInfo?.result?.frozeno_prepare_state == 1">待备货</span>
                                    <span *ngIf="orderInfo?.result?.frozeno_prepare_state == 2">待发货</span>
                                </span>
                                <span class="label-normal" *ngSwitchCase="3" >待收货</span>
                                <span class="label-full" *ngSwitchCase="6">退款中</span>
                                <span class="label-normal" *ngSwitchCase="4">交易成功</span>
                                <span class="label-full" *ngSwitchCase="5">交易失败</span>
                                <span class="label-full" *ngSwitchCase="7">已退款</span>
                                <span class="label-unknown" *ngSwitchDefault>未知</span>
                            </span>
                        </div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">下单时间：</span>{{orderInfo?.result?.created_at}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">发货时间：</span>{{orderInfo?.result?.frozeno_send_time}}</div>
                    </div>


                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">备货人：</span>黄浩能</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">发货人：</span>{{orderInfo?.result?.frozeno_express_u_id}}</div>
                    </div>

                </div>

                <div class="m-order">

                    <div class="alert alert-secondary" role="alert">
                        物流信息
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">物流公司：</span>{{orderInfo?.result?.frozeno_express_company}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">快递单号：</span>{{orderInfo?.result?.frozeno_express_code}}</div>
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">出货仓库：</span></div>
                    </div>

                </div>


                <div class="m-order" *ngIf="orderInfo?.result?.name">
                    <div class="alert alert-secondary" role="alert">
                        配送信息
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-4"><span class="m-orderdetails-title">姓名：</span>{{orderInfo?.result?.name}}</div>
                        <div class="col-6 col-md-4 "><span class="m-orderdetails-title">手机号：</span>{{orderInfo?.result?.phone}}</div>
                        <div class="col-12 col-md-4"><span class="m-orderdetails-title">邮编：</span>{{orderInfo?.result?.zip}}</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-12 col-md-8"><span class="m-orderdetails-title">详细地址：</span>{{orderInfo?.result?.province}}{{orderInfo?.result?.city}}{{orderInfo?.result?.area}}{{orderInfo?.result?.address}}</div>
                    </div>
                </div>
                    <!--需要开发票时显示-->
                <div class="m-order" *ngIf="orderInfo?.result?.invoice?.username">
                    <div class="alert alert-secondary" role="alert">
                        发票信息
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-6 col-md-6"><span class="m-orderdetails-title">名称：</span>{{orderInfo?.result?.invoice?.username}}</div>
                        <div class="col-6 col-md-6 "><span class="m-orderdetails-title">电话号码：</span>{{orderInfo?.result?.invoice?.phone}}</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-12 col-md-6 "><span class="m-orderdetails-title">税号：</span>{{orderInfo?.result?.invoice?.tax_number}}</div>
                        <div class="col-12 col-md-6"><span class="m-orderdetails-title">单位地址：</span>{{orderInfo?.result?.invoice?.address}}</div>
                    </div>
                    <div class="row m-orderdetails">
                        <div class="col-12 col-md-6 "><span class="m-orderdetails-title">开户银行：</span>{{orderInfo?.result?.invoice?.bank}}</div>
                        <div class="col-12 col-md-6"><span class="m-orderdetails-title">银行账户：</span>{{orderInfo?.result?.invoice?.bank_account}}</div>
                    </div>
                </div>

                <div class="m-order">
                    <div class="alert alert-secondary" role="alert">
                        财务信息
                    </div>

                    <!--佣金可提现总金额：订单金额-导入仪-运费-税费 -->
                    <!--</div>-->
                    <!--表格默认最少显示5行-->
                    <table class="table table-striped table-forum">
                        <thead>
                        <tr>
                            <th scope="col">购买人</th>
                            <th scope="col">订单编号</th>
                            <th scope="col">会员等级</th>
                            <th scope="col">等级</th>
                            <th scope="col">可结算总金额</th>
                            <th scope="col">佣金</th>
                            <th scope="col">状态</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr >
                            <td>张三&nbsp;&nbsp;15228592891</td>
                            <td>64646464</td>
                            <td>VIP</td>
                            <td>一级</td>
                            <td>666</td>
                            <td>12</td>
                            <td>已结算</td>
                        <tr>
                        <tr >
                            <td>张三&nbsp;&nbsp;15228592891</td>
                            <td>64646464</td>
                            <td>VIP</td>
                            <td>一级</td>
                            <td>666</td>
                            <td>12</td>
                            <td>已结算</td>
                        <tr>
                        <tr class="m-order-colspan">
                            <td colspan="7">订单总佣金：<span class="m-order-money">48</span></td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" (click)="lgModal.hide()">
                        返回
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--此下为打印内容-->
<div  style="display: none">

    <essence-ng2-print
            #printBtn
            [mode]="'popup'"
            [popTitle]="'用户订单表格打印'"
            [btnText]="'打印'"
            [btnClass]="{'btn': true, 'btn-warning': true}"
            [printHTML]="print_div"
            [printStyle]="printStyle"
            [printCSS]="printCSS"
            [showBtn]="false">
        <!--(click)="beforePrint()"-->
        <!--(printComplete)="printComplete()"-->

    </essence-ng2-print>
    <div class="receipt" #print_div>
        <div class="rt-main rt-flex">
            <div class="rt-main-doc"  style="padding-right:60px;">
                <div class="rt-item-hd">
                    <div class="rt-item-hd-img rt-center">
                        <img src="assets/img/frozen-black.png" class="rt-mg">
                    </div>
                    <div class="rt-center rt-font-lg">深圳冻龄智美生物科技有限公司</div>
                    <div class="rt-center">黑科技纯钛金属表皮电子系统，开启科技焕肤之旅。
                    </div>
                </div>
                <div class="rt-item">
                    <div class="rt-left" style="width:50%;padding-right:20px;" >
                        <div class="" style="font-weight: bold;">配送地址</div>
                        <div class="">名称：{{(orderInfo.result?.c_name) ? (orderInfo.result?.c_name) : (orderInfo.result?.c_phone)}}</div>
                        <div class="">姓名：{{orderInfo.result?.name}}</div>
                        <div class="">省/市/自治区：{{orderInfo.result?.province}}{{orderInfo.result?.city}}{{orderInfo.result?.area}}</div>
                        <div class="">街道地址：{{orderInfo.result?.address}}</div>
                        <div class="">邮政编码:{{orderInfo.result?.zip}}</div>
                        <div class="">电话：{{orderInfo.result?.phone}}</div>
                    </div>
                    <div class="rt-right" style="width:50%;">
                        <div class="rt-one">
                            <img src="assets/img/one1.jpg" class="rt-one-mg">
                        </div>
                        <div class="">订单编号：{{orderInfo.result?.tax_number}}</div>
                        <div class="">日期：{{orderInfo.result?.created_at}}</div>
                        <div class="">客户ID：{{orderInfo.result?.frozeno_customer_id}}</div>
                    </div>
                </div>
                <div class="rt-table">
                    <div class="rt-table-hd">
                        <div class="">出货仓库：</div>
                        <div class="">配送方式：{{orderInfo.result?.frozeno_express_company}}</div>
                        <div class="">付款方式：微信</div>
                    </div>
                    <table class="rt-gridtable">
                        <tr>
                            <th >No.</th>
                            <th >商品编号</th>
                            <th >名称</th>
                            <th >数量</th>
                            <th >折扣价</th>
                        </tr>
                        <tr *ngFor="let p of orderInfo?.result?.products;let indp = index;">
                            <td>{{indp+1}}</td>
                            <td>{{p.category_number}}</td>
                            <td>{{p.category_desc}}</td>
                            <td>{{p.product_count}}</td>
                            <td>{{p.product_amount}}</td>
                        </tr>
                        <tr>
                            <td class="ft-left" colspan="3">合计：</td>
                            <td>{{orderInfo?.result?.totalCount}}</td>
                            <td>{{orderInfo?.result?.frozeno_order_amount}}</td>
                        </tr>
                    </table>
                    <div class="rt-table-right" style="padding: 10px 0 10px;">收据</div>
                    <div class="rt-center rt-ft">谢谢惠顾！</div>
                </div>
            </div>

            <div class="rt-main-doc"  style="padding-left:60px;">
                <div class="rt-item-hd">
                    <div class="rt-item-hd-img rt-center">
                        <img src="assets/img/frozen-black.png" class="rt-mg">
                    </div>
                    <div class="rt-center rt-font-lg">深圳冻龄智美生物科技有限公司</div>
                    <div class="rt-center">黑科技纯钛金属表皮电子系统，开启科技焕肤之旅。
                    </div>
                </div>
                <div class="rt-item">
                    <div class="rt-left" style="width:50%;padding-right:20px;" >
                        <div class="" style="font-weight: bold;">配送地址</div>
                        <div class="">名称：{{(orderInfo.result?.c_name) ? (orderInfo.result?.c_name) : (orderInfo.result?.c_phone)}}</div>
                        <div class="">姓名：{{orderInfo.result?.name}}</div>
                        <div class="">省/市/自治区：{{orderInfo.result?.province}}{{orderInfo.result?.city}}{{orderInfo.result?.area}}</div>
                        <div class="">街道地址：{{orderInfo.result?.address}}</div>
                        <div class="">邮政编码:{{orderInfo.result?.zip}}</div>
                        <div class="">电话：{{orderInfo.result?.phone}}</div>
                    </div>
                    <div class="rt-right" style="width:50%;">
                        <div class="rt-one">
                            <img src="assets/img/one1.jpg" class="rt-one-mg">
                        </div>
                        <div class="">发票编号：{{orderInfo.result?.tax_number}}</div>
                        <div class="">日期：{{orderInfo.result?.created_at}}</div>
                        <div class="">客户ID：{{orderInfo.result?.frozeno_customer_id}}</div>
                    </div>
                </div>
                <div class="rt-table">
                    <div class="rt-table-hd">
                        <div class="">出货仓库：</div>
                        <div class="">配送方式：{{orderInfo.result?.frozeno_express_company}}</div>
                        <div class="">付款方式：微信</div>
                    </div>
                    <table class="rt-gridtable">
                        <tr>
                            <th >No.</th>
                            <th >商品编号</th>
                            <th >名称</th>
                            <th >数量</th>
                            <th >折扣价</th>
                        </tr>
                        <tr *ngFor="let p of orderInfo?.result?.products;let indp = index;">
                            <td>{{indp+1}}</td>
                            <td>{{p.category_number}}</td>
                            <td>{{p.category_desc}}</td>
                            <td>{{p.product_count}}</td>
                            <td>{{p.product_amount}}</td>
                        </tr>
                        <tr>
                            <td class="ft-left" colspan="3">合计：</td>
                            <td>{{orderInfo?.result?.totalCount}}</td>
                            <td>{{orderInfo?.result?.frozeno_order_amount}}</td>
                        </tr>
                    </table>
                    <div class="rt-table-right" style="padding: 10px 0 10px;">收据</div>
                    <div class="rt-center rt-ft">谢谢惠顾！</div>
                </div>
            </div>
        </div>
    </div>
</div>
